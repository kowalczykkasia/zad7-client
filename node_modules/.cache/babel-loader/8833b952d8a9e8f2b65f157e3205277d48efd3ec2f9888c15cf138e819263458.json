{"ast":null,"code":"var _jsxFileName = \"/Users/kasiakowalczyk/Desktop/studies/ebiznes/zad7-client/src/App.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport ItemList from './components/ItemList';\nimport Cart from './components/cart';\nimport axios from 'axios';\nimport CategoryList from './components/categoryList';\nimport Navbar from './components/Navbar';\nimport './index.css';\nimport { PRODUCTS_URL, CATEGORIES_URL } from './consts';\nimport SuccessDialog from './components/successDialog';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [currentItems, setCurrentItems] = useState([]);\n  const [items, setItems] = useState([]);\n  const [cartItems, setCartItems] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [selectedCategory, setSelectedCategory] = useState(null);\n  const [isLoadingFromDbFinished, setIsLoadingFromDbFinished] = useState(null);\n  const [showSuccessDialog, setShowSuccessDialog] = useState(false);\n  useEffect(() => {\n    const savedCartItems = JSON.parse(localStorage.getItem('cart')) || [];\n    console.log(\"Loaded cart items: \", savedCartItems);\n    setCartItems(savedCartItems);\n    setIsLoadingFromDbFinished(true);\n  }, []);\n  useEffect(() => {\n    if (isLoadingFromDbFinished) {\n      localStorage.setItem('cart', JSON.stringify(cartItems));\n      console.log(\"Saved cart items: \", JSON.parse(localStorage.getItem('cart')) || []);\n    }\n  }, [cartItems, isLoadingFromDbFinished]);\n  useEffect(() => {\n    axios.get(PRODUCTS_URL).then(response => {\n      console.log(response.data);\n      setItems(response.data);\n      setCurrentItems(response.data);\n    }).catch(error => {\n      console.error(\"There was an error fetching items\", error);\n    });\n  }, []);\n  useEffect(() => {\n    axios.get(CATEGORIES_URL).then(response => {\n      console.log(response.data);\n      setCategories(response.data);\n    }).catch(error => {\n      console.error(\"There was an error fetching items\", error);\n    });\n  }, []);\n  useEffect(() => {\n    setCurrentItems(selectedCategory === null ? items : items.filter(item => item.category_id === selectedCategory.id));\n  }, [selectedCategory, items]);\n  const selectCategory = category => {\n    setSelectedCategory(category === selectedCategory ? null : category);\n  };\n  const addToCart = item => {\n    const existingItem = cartItems.find(cartItem => cartItem.id === item.id);\n    if (existingItem) {\n      setCartItems(cartItems.map(cartItem => cartItem.id === item.id ? {\n        ...cartItem,\n        quantity: cartItem.quantity + 1\n      } : cartItem));\n    } else {\n      setCartItems([...cartItems, {\n        ...item,\n        quantity: 1\n      }]);\n    }\n  };\n  const removeFromCart = item => {\n    const existingItem = cartItems.find(cartItem => cartItem.id === item.id);\n    if (existingItem.quantity === 1) {\n      setCartItems(cartItems.filter(cartItem => cartItem.id !== item.id));\n    } else {\n      setCartItems(cartItems.map(cartItem => cartItem.id === item.id ? {\n        ...cartItem,\n        quantity: cartItem.quantity - 1\n      } : cartItem));\n    }\n  };\n  const handlePayment = () => {\n    alert(\"Are you sure you want to proceed with the payment?\");\n    setCartItems([]);\n    setShowSuccessDialog(true);\n  };\n  const closeDialog = () => {\n    setShowSuccessDialog(false);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container mx-auto p-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-4 gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"md:col-span-1\",\n          children: /*#__PURE__*/_jsxDEV(CategoryList, {\n            categories: categories,\n            selectedCategory: selectedCategory,\n            selectCategory: selectCategory\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"md:col-span-2\",\n          children: /*#__PURE__*/_jsxDEV(ItemList, {\n            items: currentItems,\n            addToCart: addToCart\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"md:col-span-1\",\n          children: /*#__PURE__*/_jsxDEV(Cart, {\n            cartItems: cartItems,\n            removeFromCart: removeFromCart,\n            handlePayment: handlePayment\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 11\n        }, this), showSuccessDialog && /*#__PURE__*/_jsxDEV(SuccessDialog, {\n          onClose: closeDialog\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 33\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 111,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"FyvDHAPMztTb2I5UY744PJYQ2Dc=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useState","useEffect","ItemList","Cart","axios","CategoryList","Navbar","PRODUCTS_URL","CATEGORIES_URL","SuccessDialog","jsxDEV","_jsxDEV","App","_s","currentItems","setCurrentItems","items","setItems","cartItems","setCartItems","categories","setCategories","selectedCategory","setSelectedCategory","isLoadingFromDbFinished","setIsLoadingFromDbFinished","showSuccessDialog","setShowSuccessDialog","savedCartItems","JSON","parse","localStorage","getItem","console","log","setItem","stringify","get","then","response","data","catch","error","filter","item","category_id","id","selectCategory","category","addToCart","existingItem","find","cartItem","map","quantity","removeFromCart","handlePayment","alert","closeDialog","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClose","_c","$RefreshReg$"],"sources":["/Users/kasiakowalczyk/Desktop/studies/ebiznes/zad7-client/src/App.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport ItemList from './components/ItemList';\nimport Cart from './components/cart';\nimport axios from 'axios';\nimport CategoryList from './components/categoryList';\nimport Navbar from './components/Navbar';\nimport './index.css';\nimport { PRODUCTS_URL, CATEGORIES_URL} from './consts'\nimport SuccessDialog from './components/successDialog';\n\n\nfunction App() {\n  const [currentItems, setCurrentItems] = useState([]);\n  const [items, setItems] = useState([]);\n  const [cartItems, setCartItems] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [selectedCategory, setSelectedCategory] = useState(null);\n  const [isLoadingFromDbFinished, setIsLoadingFromDbFinished] = useState(null);\n  const [showSuccessDialog, setShowSuccessDialog] = useState(false);\n\n  useEffect(() => {\n    const savedCartItems = JSON.parse(localStorage.getItem('cart')) || [];\n    console.log(\"Loaded cart items: \", savedCartItems)\n    setCartItems(savedCartItems);\n    setIsLoadingFromDbFinished(true);\n  }, []);\n\n  useEffect(() => {\n    if (isLoadingFromDbFinished) {\n      localStorage.setItem('cart', JSON.stringify(cartItems));\n      console.log(\"Saved cart items: \", JSON.parse(localStorage.getItem('cart')) || []);\n    }\n  }, [cartItems, isLoadingFromDbFinished]);\n\n\n  useEffect(() => {\n    axios.get(PRODUCTS_URL)\n    .then(response => {\n      console.log(response.data);\n      setItems(response.data);\n      setCurrentItems(response.data);\n    })\n    .catch(error => {\n      console.error(\"There was an error fetching items\", error)\n    })\n  }, [])\n\n  useEffect(() => {\n    axios.get(CATEGORIES_URL)\n    .then(response => {\n      console.log(response.data);\n      setCategories(response.data);\n    })\n    .catch(error => {\n      console.error(\"There was an error fetching items\", error)\n    })\n  }, [])\n\n  useEffect(() => {\n    setCurrentItems(\n      selectedCategory === null\n        ? items\n        : items.filter(item => item.category_id === selectedCategory.id)\n    );\n  }, [selectedCategory, items]);\n\n\n  const selectCategory = (category) => {\n    setSelectedCategory(category === selectedCategory ? null : category);\n  }\n\n  const addToCart = (item) => {\n    const existingItem = cartItems.find(cartItem => cartItem.id === item.id);\n    if (existingItem) {\n      setCartItems(cartItems.map(cartItem =>\n        cartItem.id === item.id\n          ? { ...cartItem, quantity: cartItem.quantity + 1 }\n          : cartItem\n      ));\n    } else {\n      setCartItems([...cartItems, { ...item, quantity: 1 }]);\n    }\n  };\n\n  const removeFromCart = (item) => {\n    const existingItem = cartItems.find(cartItem => cartItem.id === item.id);\n\n    if(existingItem.quantity === 1) {\n        setCartItems(cartItems.filter(cartItem => cartItem.id !== item.id));\n    } \n    else {\n        setCartItems(cartItems.map(cartItem => \n          cartItem.id === item.id ? {...cartItem, quantity: cartItem.quantity - 1} \n          : cartItem  \n        )\n      );\n    }\n  };\n\n  const handlePayment = () => {\n    alert(\"Are you sure you want to proceed with the payment?\")\n    setCartItems([]);\n    setShowSuccessDialog(true);\n  };\n\n  const closeDialog = () => {\n    setShowSuccessDialog(false);\n  };\n\n  return (\n    <div className=\"App\">\n      <Navbar />\n      <div className=\"container mx-auto p-4\">\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n          <div className=\"md:col-span-1\">\n            <CategoryList categories={categories} selectedCategory={selectedCategory} selectCategory={selectCategory}/>\n          </div>\n          <div className=\"md:col-span-2\">\n            <ItemList items={currentItems} addToCart={addToCart} />\n          </div>\n          <div className=\"md:col-span-1\">\n            <Cart cartItems={cartItems} removeFromCart={removeFromCart} handlePayment={handlePayment}/>\n          </div>\n          {showSuccessDialog && <SuccessDialog onClose={closeDialog}/>}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":";;AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,OAAOC,QAAQ,MAAM,uBAAuB;AAC5C,OAAOC,IAAI,MAAM,mBAAmB;AACpC,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,YAAY,MAAM,2BAA2B;AACpD,OAAOC,MAAM,MAAM,qBAAqB;AACxC,OAAO,aAAa;AACpB,SAASC,YAAY,EAAEC,cAAc,QAAO,UAAU;AACtD,OAAOC,aAAa,MAAM,4BAA4B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAGvD,SAASC,GAAGA,CAAA,EAAG;EAAAC,EAAA;EACb,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGf,QAAQ,CAAC,EAAE,CAAC;EACpD,MAAM,CAACgB,KAAK,EAAEC,QAAQ,CAAC,GAAGjB,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACkB,SAAS,EAAEC,YAAY,CAAC,GAAGnB,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAM,CAACoB,UAAU,EAAEC,aAAa,CAAC,GAAGrB,QAAQ,CAAC,EAAE,CAAC;EAChD,MAAM,CAACsB,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGvB,QAAQ,CAAC,IAAI,CAAC;EAC9D,MAAM,CAACwB,uBAAuB,EAAEC,0BAA0B,CAAC,GAAGzB,QAAQ,CAAC,IAAI,CAAC;EAC5E,MAAM,CAAC0B,iBAAiB,EAAEC,oBAAoB,CAAC,GAAG3B,QAAQ,CAAC,KAAK,CAAC;EAEjEC,SAAS,CAAC,MAAM;IACd,MAAM2B,cAAc,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE;IACrEC,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAEN,cAAc,CAAC;IAClDT,YAAY,CAACS,cAAc,CAAC;IAC5BH,0BAA0B,CAAC,IAAI,CAAC;EAClC,CAAC,EAAE,EAAE,CAAC;EAENxB,SAAS,CAAC,MAAM;IACd,IAAIuB,uBAAuB,EAAE;MAC3BO,YAAY,CAACI,OAAO,CAAC,MAAM,EAAEN,IAAI,CAACO,SAAS,CAAClB,SAAS,CAAC,CAAC;MACvDe,OAAO,CAACC,GAAG,CAAC,oBAAoB,EAAEL,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE,CAAC;IACnF;EACF,CAAC,EAAE,CAACd,SAAS,EAAEM,uBAAuB,CAAC,CAAC;EAGxCvB,SAAS,CAAC,MAAM;IACdG,KAAK,CAACiC,GAAG,CAAC9B,YAAY,CAAC,CACtB+B,IAAI,CAACC,QAAQ,IAAI;MAChBN,OAAO,CAACC,GAAG,CAACK,QAAQ,CAACC,IAAI,CAAC;MAC1BvB,QAAQ,CAACsB,QAAQ,CAACC,IAAI,CAAC;MACvBzB,eAAe,CAACwB,QAAQ,CAACC,IAAI,CAAC;IAChC,CAAC,CAAC,CACDC,KAAK,CAACC,KAAK,IAAI;MACdT,OAAO,CAACS,KAAK,CAAC,mCAAmC,EAAEA,KAAK,CAAC;IAC3D,CAAC,CAAC;EACJ,CAAC,EAAE,EAAE,CAAC;EAENzC,SAAS,CAAC,MAAM;IACdG,KAAK,CAACiC,GAAG,CAAC7B,cAAc,CAAC,CACxB8B,IAAI,CAACC,QAAQ,IAAI;MAChBN,OAAO,CAACC,GAAG,CAACK,QAAQ,CAACC,IAAI,CAAC;MAC1BnB,aAAa,CAACkB,QAAQ,CAACC,IAAI,CAAC;IAC9B,CAAC,CAAC,CACDC,KAAK,CAACC,KAAK,IAAI;MACdT,OAAO,CAACS,KAAK,CAAC,mCAAmC,EAAEA,KAAK,CAAC;IAC3D,CAAC,CAAC;EACJ,CAAC,EAAE,EAAE,CAAC;EAENzC,SAAS,CAAC,MAAM;IACdc,eAAe,CACbO,gBAAgB,KAAK,IAAI,GACrBN,KAAK,GACLA,KAAK,CAAC2B,MAAM,CAACC,IAAI,IAAIA,IAAI,CAACC,WAAW,KAAKvB,gBAAgB,CAACwB,EAAE,CACnE,CAAC;EACH,CAAC,EAAE,CAACxB,gBAAgB,EAAEN,KAAK,CAAC,CAAC;EAG7B,MAAM+B,cAAc,GAAIC,QAAQ,IAAK;IACnCzB,mBAAmB,CAACyB,QAAQ,KAAK1B,gBAAgB,GAAG,IAAI,GAAG0B,QAAQ,CAAC;EACtE,CAAC;EAED,MAAMC,SAAS,GAAIL,IAAI,IAAK;IAC1B,MAAMM,YAAY,GAAGhC,SAAS,CAACiC,IAAI,CAACC,QAAQ,IAAIA,QAAQ,CAACN,EAAE,KAAKF,IAAI,CAACE,EAAE,CAAC;IACxE,IAAII,YAAY,EAAE;MAChB/B,YAAY,CAACD,SAAS,CAACmC,GAAG,CAACD,QAAQ,IACjCA,QAAQ,CAACN,EAAE,KAAKF,IAAI,CAACE,EAAE,GACnB;QAAE,GAAGM,QAAQ;QAAEE,QAAQ,EAAEF,QAAQ,CAACE,QAAQ,GAAG;MAAE,CAAC,GAChDF,QACN,CAAC,CAAC;IACJ,CAAC,MAAM;MACLjC,YAAY,CAAC,CAAC,GAAGD,SAAS,EAAE;QAAE,GAAG0B,IAAI;QAAEU,QAAQ,EAAE;MAAE,CAAC,CAAC,CAAC;IACxD;EACF,CAAC;EAED,MAAMC,cAAc,GAAIX,IAAI,IAAK;IAC/B,MAAMM,YAAY,GAAGhC,SAAS,CAACiC,IAAI,CAACC,QAAQ,IAAIA,QAAQ,CAACN,EAAE,KAAKF,IAAI,CAACE,EAAE,CAAC;IAExE,IAAGI,YAAY,CAACI,QAAQ,KAAK,CAAC,EAAE;MAC5BnC,YAAY,CAACD,SAAS,CAACyB,MAAM,CAACS,QAAQ,IAAIA,QAAQ,CAACN,EAAE,KAAKF,IAAI,CAACE,EAAE,CAAC,CAAC;IACvE,CAAC,MACI;MACD3B,YAAY,CAACD,SAAS,CAACmC,GAAG,CAACD,QAAQ,IACjCA,QAAQ,CAACN,EAAE,KAAKF,IAAI,CAACE,EAAE,GAAG;QAAC,GAAGM,QAAQ;QAAEE,QAAQ,EAAEF,QAAQ,CAACE,QAAQ,GAAG;MAAC,CAAC,GACtEF,QACJ,CACF,CAAC;IACH;EACF,CAAC;EAED,MAAMI,aAAa,GAAGA,CAAA,KAAM;IAC1BC,KAAK,CAAC,oDAAoD,CAAC;IAC3DtC,YAAY,CAAC,EAAE,CAAC;IAChBQ,oBAAoB,CAAC,IAAI,CAAC;EAC5B,CAAC;EAED,MAAM+B,WAAW,GAAGA,CAAA,KAAM;IACxB/B,oBAAoB,CAAC,KAAK,CAAC;EAC7B,CAAC;EAED,oBACEhB,OAAA;IAAKgD,SAAS,EAAC,KAAK;IAAAC,QAAA,gBAClBjD,OAAA,CAACL,MAAM;MAAAuD,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eACVrD,OAAA;MAAKgD,SAAS,EAAC,uBAAuB;MAAAC,QAAA,eACpCjD,OAAA;QAAKgD,SAAS,EAAC,uCAAuC;QAAAC,QAAA,gBACpDjD,OAAA;UAAKgD,SAAS,EAAC,eAAe;UAAAC,QAAA,eAC5BjD,OAAA,CAACN,YAAY;YAACe,UAAU,EAAEA,UAAW;YAACE,gBAAgB,EAAEA,gBAAiB;YAACyB,cAAc,EAAEA;UAAe;YAAAc,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAC;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACxG,CAAC,eACNrD,OAAA;UAAKgD,SAAS,EAAC,eAAe;UAAAC,QAAA,eAC5BjD,OAAA,CAACT,QAAQ;YAACc,KAAK,EAAEF,YAAa;YAACmC,SAAS,EAAEA;UAAU;YAAAY,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACpD,CAAC,eACNrD,OAAA;UAAKgD,SAAS,EAAC,eAAe;UAAAC,QAAA,eAC5BjD,OAAA,CAACR,IAAI;YAACe,SAAS,EAAEA,SAAU;YAACqC,cAAc,EAAEA,cAAe;YAACC,aAAa,EAAEA;UAAc;YAAAK,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAC;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACxF,CAAC,EACLtC,iBAAiB,iBAAIf,OAAA,CAACF,aAAa;UAACwD,OAAO,EAAEP;QAAY;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAC,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACzD;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;AAACnD,EAAA,CArHQD,GAAG;AAAAsD,EAAA,GAAHtD,GAAG;AAuHZ,eAAeA,GAAG;AAAC,IAAAsD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}